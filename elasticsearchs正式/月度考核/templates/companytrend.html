<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>公司趋势</title>
    <link ref="stylesheet" href='{{ static_url("css/bootstrap-table.min.css") }}'>


</head>
<body>
    <div class="vertical">

    <form >

    <input type="text" id="q" style="margin:0px auto;width:300px; display: inline-block"
               class="typeahead form-control" data-provide="typeahead"
            name="q"
               autocomplete="off" placeholder="请输入要搜索名称">

        <select id="mySelect" class="form-control selcls"
        style="margin:2px auto;width:100px; display: inline-block"
        > <!-- onchange="show()" -->
            <option value="LoadCompanyTrend" selected="selected">公司</option>
            <option value="LoadPersonTrend">个人</option>
        </select>
        <input type="button" class="btn btn-success " onclick="LoadGranph()" value="查询">
    </form>
    <hr />
    <p>
        个人: 218CEA10-237F-11E5-AA10-F3DFF09504A9 <br />
        公司: 26F79860-1A85-11E3-9860-D2A88FA7BD89
    </p>
    <hr />
    </div>
    <div id="main" style="width: 100%;height:400px;"></div>

    <script type="text/javascript">
    //获取自动补全数据
        $('input.typeahead').typeahead({
            source:  function (query, process) {
            return $.post('/search', { query: query }, function (data) {
                    console.log(data);
                    data = $.parseJSON(data);
                    return process(data);
                });
            }
        });
    $(document).ready(function() {
        $.post("/echarts/api/company", function (data) {
            var x = data["x_series"];
            var y = data["y_series"];
        //此处开始图表展示
        var myChart = echarts.init(document.getElementById('main'));
        option = {
            color: ['#ff3d3d'],
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                x: 'left',
                padding: [10, 20, 0, 20],
                data: ['拜访次数'],
                selected: {
                    'VATS': true
                }
            },
            grid: {
                left: '0',
                right: '5%',
                bottom: '10%',
                top: '13%',
                containLabel: true
            },

            xAxis: {
                axisLabel :{
                    interval:0, //显示所有的x轴的数据
                    rotate: -45,
                    margin: 5
                } ,
                type: 'category',
                boundaryGap: false,
                splitLine: { //网格线
                    show: true,
                    lineStyle: {
                        color: ['#b1b1b1'],
                        type: 'dashed'
                    }
                },
                data:  x
            },
            yAxis: {
                splitLine: { //网格线
                    show: true,
                    lineStyle: {
                        color: ['#b1b1b1'],
                        type: 'dashed'
                    }
                }
            },
            series: [{
                name: 'VATS',
                type: 'line',
                data:  y,
                label: {
                    normal: {
                        show: true,
                        position: 'top' //值显示
                    }
                }
            }]
        };
        myChart.setOption(option)

        });//请求结束
    }) ;//ready结束


    </script>
</body>
</html>